{"version":3,"sources":["App.js","index.js"],"names":["App","state","predictedImage","showVideo","showImage","videoRef","React","createRef","video","console","log","canvas","document","getElementById","this","classifier","predict","gotResults","bind","gotImageResults","error","results","newResults","setState","label","context","getContext","img","Image","onload","width","height","drawImage","src","file","files","reader","FileReader","readAsDataURL","event","setTimeout","result","ml5","modelLoaded","current","navigator","mediaDevices","getUserMedia","then","stream","srcObject","className","autoPlay","style","inlineSize","ref","id","margin","type","value","onClick","handleVideo","for","display","name","accept","onChange","handleChange","length","Component","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.94fe8cce.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./App.css\";\nimport * as ml5 from \"ml5\";\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      predictedImage: \"\",\n      showVideo: false,\n      showImage: true,\n    };\n    this.videoRef = React.createRef();\n  }\n\n  modelLoaded(video) {\n    console.log(\"Model Loaded!\");\n    var canvas = document.getElementById(\"canvas\");\n    if (canvas == null) {\n      this.classifier.predict(video, this.gotResults.bind(this));\n    } else {\n      this.classifier.predict(canvas, this.gotImageResults.bind(this));\n    }\n  }\n\n  gotResults(error, results) {\n    if (error) {\n      console.error(error);\n    } else {\n      let newResults = results[0];\n      this.setState({\n        predictedImage: newResults.label,\n      });\n      this.classifier.predict(this.gotResults.bind(this));\n    }\n  }\n\n  gotImageResults(error, results) {\n    if (error) {\n      console.error(error);\n    } else {\n      let newResults = results[0];\n      this.setState({\n        predictedImage: newResults.label,\n      });\n    }\n  }\n\n  componentDidMount() {\n    var canvas = document.getElementById(\"canvas\");\n    var context = canvas.getContext(\"2d\");\n\n    var img = new Image();\n    img.onload = function () {\n      canvas.width = img.width;\n      canvas.height = img.height;\n      context.drawImage(img, 0, 0);\n    };\n    img.src = \"./baby_yoda.jpg\";\n  }\n\n  handleChange() {\n    this.setState(\n      {\n        showImage: true,\n        showVideo: false,\n      },\n      () => {\n        var file = document.getElementById(\"avatar\").files[0];\n        var reader = new FileReader();\n        reader.readAsDataURL(file);\n\n        reader.onload = function (event) {\n          setTimeout(() => {\n            var canvas = document.getElementById(\"canvas\");\n            var context = canvas.getContext(\"2d\");\n\n            var img = new Image();\n            img.onload = function () {\n              canvas.width = img.width;\n              canvas.height = img.height;\n              context.drawImage(img, 0, 0);\n            };\n            img.src = reader.result;\n          });\n        };\n        this.classifier = ml5.imageClassifier(\n          \"MobileNet\",\n          this.modelLoaded.bind(this)\n        );\n      }\n    );\n  }\n\n  handleVideo() {\n    this.setState(\n      {\n        showVideo: true,\n        showImage: false,\n      },\n      () => {\n        let video = this.videoRef.current;\n        navigator.mediaDevices.getUserMedia({ video: true }).then((stream) => {\n          video.srcObject = stream;\n        });\n        this.classifier = ml5.imageClassifier(\n          \"MobileNet\",\n          video,\n          this.modelLoaded.bind(this, video)\n        );\n      }\n    );\n  }\n\n  render() {\n    var { showVideo, showImage } = this.state;\n    return (\n      <div className=\"App\">\n        <div className=\"App-header\">Image Classification</div>\n        {showVideo ? (\n          <video\n            autoPlay={true}\n            width=\"600\"\n            height=\"600\"\n            style={{ inlineSize: \"auto\" }}\n            ref={this.videoRef}\n          />\n        ) : null}\n        {showImage ? <canvas id=\"canvas\" /> : null}\n        <div style={{margin:\"4px\"}}>\n          <input\n            type=\"button\"\n            value=\"Start Video\"\n            className=\"inputButton\"\n            onClick={this.handleVideo.bind(this)}\n          ></input>\n        <label for=\"avatar\" className=\"label\">\n          Upload Image\n          <input\n            type=\"file\"\n            style={{display:\"none\"}}\n            id=\"avatar\"\n            name=\"avatar\"\n            accept=\"image/png, image/jpeg\"\n            onChange={this.handleChange.bind(this)}\n          />\n          </label>\n        </div>\n        <div className=\"predict-text\" id=\"text\">\n          {this.state.predictedImage.length > 0\n            ? `Predicted Image : ${this.state.predictedImage}`\n            : \"Predicted Image : Baby Yoda\"}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}